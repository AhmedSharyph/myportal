<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

  <!-- Static Header -->
<header class="bg-blue-600 text-white p-4 flex justify-between items-center">
  <!-- Left: App Name + Welcome -->
  <div class="flex items-center space-x-4">
    <h1 class="text-xl font-bold">My App</h1>
    <span id="welcome" class="text-sm font-thin"></span>
  </div>

  <!-- Right: Navigation + Logout -->
  <div class="flex space-x-4">
    <ul id="navMenu" class="flex space-x-4">
      <li><a href="dashboard.html" class="hover:underline">Dashboard</a></li>
      <li><a href="profile.html" class="hover:underline">Profile</a></li>
    </ul>
    <button id="logoutBtn" class="bg-red-500 px-3 py-1 rounded hover:bg-red-600">Logout</button>
  </div>
</header>
<script>
function loadMenuLinks() {
  const navMenu = document.getElementById('navMenu');
  if (!navMenu) return;

  // Remove previous dynamic links
  navMenu.querySelectorAll('.dynamic-link').forEach(li => li.remove());

  // Load from localStorage
  const menuLinks = JSON.parse(localStorage.getItem('menuLinks') || '[]');
  menuLinks.forEach(link => {
    const li = document.createElement('li');
    li.className = "dynamic-link";
    const a = document.createElement('a');
    a.href = link.url;
    a.textContent = link.label;
    a.className = "hover:underline";
    li.appendChild(a);
    navMenu.appendChild(li);
  });
}

// Initial load
loadMenuLinks();

// Listen for changes in other tabs/windows
window.addEventListener('storage', (event) => {
  if (event.key === 'menuLinks') {
    loadMenuLinks();
  }
});
</script>


<script>
  // Display welcome message
  const email = localStorage.getItem("userEmail");
  if (!email) {
    window.location.replace("index.html");
  } else {
    document.getElementById("welcome").innerText = `Welcome, ${email}`;
  }

  // Logout button
  document.getElementById("logoutBtn").addEventListener("click", () => {
    localStorage.removeItem("userEmail");
    localStorage.removeItem("loggedInUser");
    window.location.replace("index.html");
  });
</script>

  <!-- Main Content -->
<main class="p-8">
  <h2 class="text-2xl font-bold mb-4">Dashboard</h2>
  <p>Welcome to your dashboard! Accessible only after login.</p>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6">

    <!-- Existing Cards -->
    <div class="bg-white p-4 rounded shadow">Card 1</div>
    <div class="bg-white p-4 rounded shadow">Card 2</div>
    
    <!-- Menu Link Update Widget Card -->
    <div class="bg-white p-4 rounded shadow">
      <h3 class="text-lg font-semibold mb-2">Add Menu Link</h3>
      <input id="menuLabel" type="text" placeholder="Label" class="w-full mb-2 p-2 border rounded" />
      <input id="menuURL" type="text" placeholder="URL" class="w-full mb-2 p-2 border rounded" />
      <button id="addMenuBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 w-full">Add Link</button>
      <p id="menuMsg" class="text-sm mt-2 text-green-600"></p>
    </div>

    <div class="bg-white p-4 rounded shadow">Card 3</div>
  </div>
</main>

<script>
  const addMenuBtn = document.getElementById('addMenuBtn');
  const menuLabel = document.getElementById('menuLabel');
  const menuURL = document.getElementById('menuURL');
  const menuMsg = document.getElementById('menuMsg');

  addMenuBtn.addEventListener('click', () => {
    const label = menuLabel.value.trim();
    const url = menuURL.value.trim();

    if (!label || !url) {
      menuMsg.textContent = "Please enter both Label and URL!";
      menuMsg.classList.remove("text-green-600");
      menuMsg.classList.add("text-red-600");
      return;
    }

    const menuLinks = JSON.parse(localStorage.getItem('menuLinks') || '[]');
    menuLinks.push({ label, url });
    localStorage.setItem('menuLinks', JSON.stringify(menuLinks));

    menuMsg.textContent = "Menu link added! Refresh other pages to see changes.";
    menuMsg.classList.remove("text-red-600");
    menuMsg.classList.add("text-green-600");

    // Clear inputs
    menuLabel.value = "";
    menuURL.value = "";
  });
</script>


  <!-- Footer -->
  <footer class="bg-gray-200 text-gray-700 p-4 text-center mt-8">
    &copy; <span id="year"></span> My App. Developed by 
    <a href="https://ahmedshareef.mv" target="_blank" class="text-blue-600 hover:underline">AhmedShareef</a>
  </footer>

  <script>
    // Show current year
    document.getElementById("year").innerText = new Date().getFullYear();

    // Check login
    const email = localStorage.getItem("userEmail");
    if (!email) window.location.replace("index.html");
    else document.getElementById("welcome").innerText = `Welcome, ${email}`;

    // Logout button
    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("userEmail");
      localStorage.removeItem("loggedInUser");
      window.location.replace("index.html");
    });
  </script>

</body>
</html>
